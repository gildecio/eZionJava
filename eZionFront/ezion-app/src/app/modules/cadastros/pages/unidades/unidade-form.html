<div class="form-container">
  <div class="form-header">
    <h1 class="form-title">
      {{ somenteLeitura ? 'Visualizar Unidade' : (editandoId ? 'Editar Unidade' : 'Nova Unidade') }}
    </h1>
  </div>

  <form [formGroup]="form" (ngSubmit)="salvar()" class="form-content">
    <div class="form-fields">
      <div class="form-group">
        <label for="sigla">Sigla *</label>
        <input
          type="text"
          id="sigla"
          formControlName="sigla"
          class="form-input"
          placeholder="Ex: KG, UN, LT"
          [readonly]="somenteLeitura"
        />
        <span class="error-message" *ngIf="obterMensagemErro('sigla')">
          {{ obterMensagemErro('sigla') }}
        </span>
      </div>

      <div class="form-group">
        <label for="descricao">Descrição *</label>
        <input
          type="text"
          id="descricao"
          formControlName="descricao"
          class="form-input"
          placeholder="Ex: Quilograma, Unidade, Litro"
          [readonly]="somenteLeitura"
        />
        <span class="error-message" *ngIf="obterMensagemErro('descricao')">
          {{ obterMensagemErro('descricao') }}
        </span>
      </div>

      <div class="form-group">
        <label for="fator">Fator de Conversão</label>
        <input
          type="number"
          id="fator"
          formControlName="fator"
          class="form-input"
          placeholder="Ex: 1000 (para conversões)"
          step="0.0001"
          min="0.0001"
          [readonly]="somenteLeitura"
        />
        <span class="help-text">
          Fator para conversão em relação à unidade pai (ex: 1000g = 1kg)
        </span>
        <span class="error-message" *ngIf="obterMensagemErro('fator')">
          {{ obterMensagemErro('fator') }}
        </span>
      </div>

      <div class="form-group">
        <label for="unidadePaiId">Unidade Pai</label>
        <select
          id="unidadePaiId"
          formControlName="unidadePaiId"
          class="form-input"
          [disabled]="somenteLeitura"
        >
          <option value="">Selecione uma unidade pai (opcional)</option>
          <option *ngFor="let unidade of unidadesBase" [value]="unidade.id">
            {{ unidade.sigla }} - {{ unidade.descricao }}
          </option>
        </select>
        <span class="help-text">
          Unidade base para conversões (ex: KG para G, LT para ML)
        </span>
        <span class="error-message" *ngIf="obterMensagemErro('unidadePaiId')">
          {{ obterMensagemErro('unidadePaiId') }}
        </span>
      </div>
    </div>

    <div class="form-actions" *ngIf="!somenteLeitura">
      <button type="button" class="btn-secondary" (click)="cancelar()" [disabled]="enviando">
        Cancelar
      </button>
      <button type="submit" class="btn-primary" [disabled]="enviando || form.invalid">
        {{ enviando ? 'Salvando...' : (editandoId ? 'Atualizar' : 'Salvar') }}
      </button>
    </div>

    <div class="form-actions" *ngIf="somenteLeitura">
      <button type="button" class="btn-secondary" (click)="cancelar()">
        Voltar
      </button>
    </div>
  </form>
</div>